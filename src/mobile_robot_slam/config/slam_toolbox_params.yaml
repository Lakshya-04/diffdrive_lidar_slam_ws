# use_sim_time: true
# slam_toolbox:
#   ros__parameters:
#     mode: mapping
#     map_frame: map
#     base_frame: base_footprint
#     odom_frame: odom
#     scan_topic: /fixed_scan
#     resolution: 0.05
#     max_laser_range: 8.0

slam_toolbox:
  ros__parameters:
    # General Settings
    solver_plugin: solver_plugins::CeresSolver
    ceres_linear_solver: SPARSE_NORMAL_CHOLESKY  
    ceres_preconditioner: SCHUR_JACOBI
    ceres_trust_strategy: LEVENBERG_MARQUARDT
    ceres_dogleg_type: TRADITIONAL_DOGLEG
    ceres_loss_function: None

    # Operation mode
    mode: mapping

    # Frame IDs - IMPORTANT: Adjust these to match your robot's TF tree
    odom_frame: odom
    map_frame: map  
    base_frame: base_footprint  # or base_link, depending on your setup
    scan_topic: /fixed_scan

    # Mapping parameters
    resolution: 0.05
    max_laser_range: 20.0
    minimum_time_interval: 0.5
    transform_publish_period: 0.02
    map_update_interval: 5.0

    # Scan matching
    use_scan_matching: true
    use_scan_barycenter: true
    minimum_travel_distance: 0.5  # meters
    minimum_travel_heading: 0.5   # radians

    # Loop closure
    do_loop_closing: true
    loop_search_maximum_distance: 3.0
    loop_match_minimum_chain_size: 10
    loop_match_maximum_variance_coarse: 3.0
    loop_match_minimum_response_coarse: 0.35
    loop_match_minimum_response_fine: 0.45

    # Correlation parameters
    correlation_search_space_dimension: 0.5
    correlation_search_space_resolution: 0.01
    correlation_search_space_smear_deviation: 0.1

    # Advanced parameters (usually don't need to change)
    stack_size_to_use: 40000000
    enable_interactive_mode: true
